name: Indexer Build & Push Images to AWS ECR for Dev / Staging branches

on: # yamllint disable-line rule:truthy
  push:
    branches:
      - adam/ct-861-websocket-topic-for-blockheight
      - main
      - 'release/indexer/v[0-9]+.[0-9]+.x'  # e.g. release/indexer/v0.1.x
      - 'release/indexer/v[0-9]+.x'  # e.g. release/indexer/v1.x
    # TODO(DEC-837): Customize github build and push to ECR by service with paths

jobs:
  call-build-and-push-ecs-services-dev5:
    name: (Dev5) Build and Push ECS Services
    uses: ./.github/workflows/indexer-build-and-push-all-ecr-images.yml
    with:
      ENVIRONMENT: dev5
    secrets: inherit